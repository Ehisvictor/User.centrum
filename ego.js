 (function(){if(window.ego&&ego.url){return}var h=new Array();var c=null;var f=0;if(typeof(ap2)!="undefined"){try{if("include" in ap2){h=ap2.include}if("domains" in ap2){f=ap2.domains.length;if(f){c=ap2.domains}}}catch(e){}}var b=function(j){var m={"protocol":null,"host":null,"path":null,"query":null,"hash":null};var l;var k=j.split("#");j=k[0];if(k.length>1){k.shift();m.hash=k.join("#")}k=j.split("?");j=k[0];if(k.length>1){k.shift();m.query=k.join("?")}l=j.indexOf("://");if(l>-1){m.protocol=j.substring(0,l);j=j.substring(l+1)}l=j.indexOf("//");if(l==0){l=j.indexOf("/",2);if(l>-1){m.host=j.substring(2,l);j=j.substring(l)}else{m.host=j.substring(2);j="/"}}m.path=j;return m};var g=function(k){var j="";if(k.protocol!==null){j=j+k.protocol+":"}if(k.host!==null){j=j+"//"+k.host}if(k.path!==null){j=j+k.path}else{j=j+"/"}if(k.query!==null){j=j+"?"+k.query}if(k.hash!==null){j=j+"#"+k.hash}return j};var i=function(j){j=j.replace(/;sid=[a-z0-9_-]+/i,"");var k=b(j);if(k.path!==null){k.path=k.path.replace(/^\/~[a-z0-9]+~[a-z0-9_-]+\//i,"/")}return k};var a=null;a=function(v){if("string"!=typeof(v)){return v}var j=false,w=0;var p=v.indexOf("://");var u=v.indexOf("//");if(-1!=p||0==u){var l="",q="";if(0==u){q=v.indexOf("/",2);if(-1==q){l=v.substring(2)}else{l=v.substring(2,q)}}else{q=v.indexOf("/",p+3);if(-1==q){l=v.substring(p+3)}else{l=v.substring(p+3,q)}}l="."+l;var m,r=l.length,t;for(w in h){m=h[w];t=l.indexOf(m);if(0<=t&&Math.abs(m.length-r)==t){var x=window.location.host;var n=x.split(".");var k=n.length;for(var s=0;s<k-2;s++){n.shift()}n.unshift("");x=n.join(".");t=l.indexOf(x);if((0<=t&&!(Math.abs(r-x.length)==t))||-1==t){j=true}delete (n);if(j&&c!==null){for(var o=0;o<f;o++){if(c[o].domain==x){v=c[o].sso+"?url="+encodeURIComponent(g(i(v)))}}}break}delete (m)}}v=g(i(v));return v};var d=null;d=function(j){return false};if(!window.ego){ego={}}if(!ego.url){ego.url=a}if(!ego.setSid){ego.setSid=d}})();String.prototype.egoUrl=function(){return ego.url(""+this)};